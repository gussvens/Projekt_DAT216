/*!CK:2132033827!*//*1456920159,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["Snek1"]); }

__d('UFIReactionsAnimatedIconImpl.react',['React','UFIReactionsAnimatedIconGradient.react','UFIReactionsAnimationData','cancelAnimationFrame','requestAnimationFrame','uniqueID'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j=60,k=1000/j;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(m,n){'use strict';i.constructor.call(this);this.animation=c('UFIReactionsAnimationData').get(m.reaction);this.id=c('uniqueID')();this.state={frame:0};}l.prototype.componentDidMount=function(){'use strict';if(this.props.animate)this.nextFrame();};l.prototype.componentDidUpdate=function(m,n){'use strict';if(this.props.animate&&(!m.animate||n.frame!==this.state.frame))this.nextFrame();};l.prototype.nextFrame=function(){'use strict';c('cancelAnimationFrame')(this.animationFrame);var m=Date.now();this.animationFrame=c('requestAnimationFrame')(function(){var n=Math.ceil(this.state.frame+(Date.now()-m)/k);if(n>=this.animation.frameCount)n=0;this.setState({frame:n});}.bind(this));};l.prototype.getKeyFrame=function(m){'use strict';return m[Math.min(this.state.frame,m.length-1)];};l.prototype.getTransforms=function(m){'use strict';if(!m)return null;return m.map(function(n){return this.getKeyFrame(n.key_values);}.bind(this)).join(' ');};l.prototype.renderFeature=function(m,n){'use strict';var o=[],p=null,q=null,r={};if(m.fill_color){p='#'+m.fill_color.substr(3);}else q=0;if(m.effects){var s=m.effects.gradient;if(s){o.push(c('React').createElement(c('UFIReactionsAnimatedIconGradient.react'),{frameCount:this.animation.frameCount,gradient:s,id:this.id,key:'gradient',name:this.animation.name}));p='url(#'+this.id+'_'+this.state.frame+')';q=null;}}if(m.stroke_color){r.stroke='#'+m.stroke_color.substr(3);r['stroke-width']=m.stroke_width;r['stroke-linecap']='round';r['stroke-linejoin']='round';}return (c('React').createElement('g',{key:n},o,c('React').createElement('path',babelHelpers['extends']({d:this.getKeyFrame(m.key_frames),fill:p,'fill-opacity':q,transform:this.getTransforms(m.feature_animations)},r))));};l.prototype.renderGroup=function(m,n){'use strict';return (c('React').createElement('g',{key:n,transform:this.getTransforms(m.animations)},m.features.map(this.renderFeature,this),m.groups.map(this.renderGroup,this)));};l.prototype.render=function(){'use strict';var m=this.animation.size,n=m.height,o=m.width,p=this.props.maxSize;return (c('React').createElement('div',{style:{width:p,height:p}},c('React').createElement('svg',{height:n,style:{position:'absolute',transform:'scale('+p/o+', '+p/n+')',transformOrigin:'0 0'},version:'1.1',width:o},this.animation.features.map(this.renderFeature,this),this.animation.groups.map(this.renderGroup,this))));};f.exports=l;},null);